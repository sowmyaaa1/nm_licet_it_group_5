{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin2021\\\\Desktop\\\\mern-ecommerce\\\\client\\\\src\\\\Context\\\\CartItemsProvider.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { CartItemsContext } from \"./CartItemsContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CartItemsProvider = props => {\n  _s();\n\n  const [cartItems, setCartItems] = useState([]);\n  const [totalAmountOfItems, setTotalAmountOfItems] = useState(0);\n\n  const addToCartHandler = (item, quantity) => {\n    const {\n      _id,\n      name,\n      price,\n      image,\n      category,\n      size\n    } = item;\n    removeFromCartHandler(item);\n    setCartItems(prevItems => [...prevItems, {\n      _id,\n      name,\n      price,\n      image,\n      category,\n      itemQuantity: quantity,\n      size\n    }]);\n  };\n\n  const removeFromCartHandler = item => {\n    setCartItems(cartItems.filter(prevItem => prevItem._id !== item._id));\n  };\n\n  const calculateTotalAmount = currentCartItems => {\n    let total = 0;\n    currentCartItems.forEach(item => {\n      total = total + item.price * item.itemQuantity;\n    });\n    setTotalAmountOfItems(total);\n  };\n\n  const quantityHandler = (itemId, action) => {\n    if (action === 'INC') {\n      setCartItems(cartItems.map(item => {\n        if (item.id === itemId) {\n          item.itemQuantity += 1;\n        }\n\n        return item;\n      }));\n    } else {\n      setCartItems(cartItems.map(item => {\n        if (item.id === itemId) {\n          item.itemQuantity -= 1;\n        }\n\n        return item;\n      }));\n    }\n  };\n\n  useEffect(() => {\n    calculateTotalAmount(cartItems);\n  }, [cartItems]);\n  const cartItemCtx = {\n    items: cartItems,\n    totalAmount: totalAmountOfItems,\n    addItem: addToCartHandler,\n    removeItem: removeFromCartHandler,\n    quantity: quantityHandler\n  };\n  return /*#__PURE__*/_jsxDEV(CartItemsContext.Provider, {\n    value: cartItemCtx,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CartItemsProvider, \"DYDzgisv8Gwc86XG5bUvJJgCBy8=\");\n\n_c = CartItemsProvider;\nexport default CartItemsProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartItemsProvider\");","map":{"version":3,"names":["useEffect","useState","CartItemsContext","CartItemsProvider","props","cartItems","setCartItems","totalAmountOfItems","setTotalAmountOfItems","addToCartHandler","item","quantity","_id","name","price","image","category","size","removeFromCartHandler","prevItems","itemQuantity","filter","prevItem","calculateTotalAmount","currentCartItems","total","forEach","quantityHandler","itemId","action","map","id","cartItemCtx","items","totalAmount","addItem","removeItem","children"],"sources":["C:/Users/Admin2021/Desktop/mern-ecommerce/client/src/Context/CartItemsProvider.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { CartItemsContext } from \"./CartItemsContext\";\r\n\r\nconst CartItemsProvider = (props) => {\r\n\r\n    const [cartItems, setCartItems] = useState([])\r\n    const [totalAmountOfItems, setTotalAmountOfItems] = useState(0)\r\n    \r\n    const addToCartHandler = (item, quantity) => {\r\n        const { _id, name, price, image, category, size} = item;\r\n        removeFromCartHandler(item)\r\n        setCartItems((prevItems) => [...prevItems, {_id, name, price, image, category, itemQuantity: quantity, size}])\r\n    }\r\n\r\n    const removeFromCartHandler = (item) => {\r\n        setCartItems(cartItems.filter((prevItem) => prevItem._id !== item._id))\r\n    }\r\n\r\n    const calculateTotalAmount = (currentCartItems) => {\r\n        let total = 0\r\n        currentCartItems.forEach((item) => {\r\n            total = total + (item.price * item.itemQuantity)\r\n        })\r\n\r\n        setTotalAmountOfItems(total)\r\n    }\r\n\r\n    const quantityHandler = (itemId, action) => {\r\n        if(action === 'INC'){\r\n            setCartItems(cartItems.map((item) => {\r\n                if(item.id  === itemId){\r\n                    item.itemQuantity += 1\r\n                }\r\n                return item\r\n            }))\r\n        }\r\n        else {\r\n            setCartItems(cartItems.map((item) => {\r\n                if(item.id  === itemId){\r\n                    item.itemQuantity -= 1\r\n                }\r\n                return item\r\n            }))\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        calculateTotalAmount(cartItems)\r\n    }, [cartItems])\r\n\r\n\r\n    const cartItemCtx = {\r\n        items: cartItems,\r\n        totalAmount: totalAmountOfItems,\r\n        addItem: addToCartHandler,\r\n        removeItem: removeFromCartHandler,\r\n        quantity: quantityHandler\r\n    }\r\n\r\n    return ( \r\n        <CartItemsContext.Provider value={cartItemCtx}>\r\n            {props.children}\r\n        </CartItemsContext.Provider>\r\n     );\r\n}\r\n \r\nexport default CartItemsProvider;"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,gBAAT,QAAiC,oBAAjC;;;AAEA,MAAMC,iBAAiB,GAAIC,KAAD,IAAW;EAAA;;EAEjC,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BL,QAAQ,CAAC,EAAD,CAA1C;EACA,MAAM,CAACM,kBAAD,EAAqBC,qBAArB,IAA8CP,QAAQ,CAAC,CAAD,CAA5D;;EAEA,MAAMQ,gBAAgB,GAAG,CAACC,IAAD,EAAOC,QAAP,KAAoB;IACzC,MAAM;MAAEC,GAAF;MAAOC,IAAP;MAAaC,KAAb;MAAoBC,KAApB;MAA2BC,QAA3B;MAAqCC;IAArC,IAA6CP,IAAnD;IACAQ,qBAAqB,CAACR,IAAD,CAArB;IACAJ,YAAY,CAAEa,SAAD,IAAe,CAAC,GAAGA,SAAJ,EAAe;MAACP,GAAD;MAAMC,IAAN;MAAYC,KAAZ;MAAmBC,KAAnB;MAA0BC,QAA1B;MAAoCI,YAAY,EAAET,QAAlD;MAA4DM;IAA5D,CAAf,CAAhB,CAAZ;EACH,CAJD;;EAMA,MAAMC,qBAAqB,GAAIR,IAAD,IAAU;IACpCJ,YAAY,CAACD,SAAS,CAACgB,MAAV,CAAkBC,QAAD,IAAcA,QAAQ,CAACV,GAAT,KAAiBF,IAAI,CAACE,GAArD,CAAD,CAAZ;EACH,CAFD;;EAIA,MAAMW,oBAAoB,GAAIC,gBAAD,IAAsB;IAC/C,IAAIC,KAAK,GAAG,CAAZ;IACAD,gBAAgB,CAACE,OAAjB,CAA0BhB,IAAD,IAAU;MAC/Be,KAAK,GAAGA,KAAK,GAAIf,IAAI,CAACI,KAAL,GAAaJ,IAAI,CAACU,YAAnC;IACH,CAFD;IAIAZ,qBAAqB,CAACiB,KAAD,CAArB;EACH,CAPD;;EASA,MAAME,eAAe,GAAG,CAACC,MAAD,EAASC,MAAT,KAAoB;IACxC,IAAGA,MAAM,KAAK,KAAd,EAAoB;MAChBvB,YAAY,CAACD,SAAS,CAACyB,GAAV,CAAepB,IAAD,IAAU;QACjC,IAAGA,IAAI,CAACqB,EAAL,KAAaH,MAAhB,EAAuB;UACnBlB,IAAI,CAACU,YAAL,IAAqB,CAArB;QACH;;QACD,OAAOV,IAAP;MACH,CALY,CAAD,CAAZ;IAMH,CAPD,MAQK;MACDJ,YAAY,CAACD,SAAS,CAACyB,GAAV,CAAepB,IAAD,IAAU;QACjC,IAAGA,IAAI,CAACqB,EAAL,KAAaH,MAAhB,EAAuB;UACnBlB,IAAI,CAACU,YAAL,IAAqB,CAArB;QACH;;QACD,OAAOV,IAAP;MACH,CALY,CAAD,CAAZ;IAMH;EACJ,CAjBD;;EAmBAV,SAAS,CAAC,MAAM;IACZuB,oBAAoB,CAAClB,SAAD,CAApB;EACH,CAFQ,EAEN,CAACA,SAAD,CAFM,CAAT;EAKA,MAAM2B,WAAW,GAAG;IAChBC,KAAK,EAAE5B,SADS;IAEhB6B,WAAW,EAAE3B,kBAFG;IAGhB4B,OAAO,EAAE1B,gBAHO;IAIhB2B,UAAU,EAAElB,qBAJI;IAKhBP,QAAQ,EAAEgB;EALM,CAApB;EAQA,oBACI,QAAC,gBAAD,CAAkB,QAAlB;IAA2B,KAAK,EAAEK,WAAlC;IAAA,UACK5B,KAAK,CAACiC;EADX;IAAA;IAAA;IAAA;EAAA,QADJ;AAKH,CA7DD;;GAAMlC,iB;;KAAAA,iB;AA+DN,eAAeA,iBAAf"},"metadata":{},"sourceType":"module"}